{{- $show_preview := .Get "show_preview" | default true -}}
{{- $show_markup := .Get "show_markup" | default true -}}
{{- $input := .Inner -}}

{{- if eq $show_preview true -}}
<div{{ with .Get "id" }} id="{{ . }}"{{ end }} class="example{{ with .Get "class" }} {{ . }}{{ end }}">
  {{- $input -}}
</div>
{{- end -}}

{{- if eq $show_markup true -}}
  {{- $.Scratch.Set "highlight_content" $input -}}

  {{- highlight (trim ($.Scratch.Get "highlight_content") "\n") "html" "" -}}
{{- end -}}